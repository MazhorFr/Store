// Initialize VanillaTilt for all product cards and setup navigation
document.addEventListener('DOMContentLoaded', function() {
    // Initialize tilt effects
    VanillaTilt.init(document.querySelectorAll("[data-tilt]"), {
        max: 8, // Reduced for subtlety
        speed: 300,
        glare: true,
        "max-glare": 0.1,
    });

    // Show the hero section on load
    showSection('hero-section');

    // Add click event listeners to nav links
    document.querySelectorAll('.nav-link, .cta-button').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            let targetSection = this.getAttribute('onclick').match(/'([^']+)'/)[1];
            showSection(targetSection);
        });
    });
});

// NEW - SIMPLE, BRUTALLY EFFECTIVE SECTION MANAGER
function showSection(sectionId) {
    // Hide all sections
    document.querySelectorAll('main > section').forEach(section => {
        section.style.display = 'none';
    });
    // Show the requested section
    document.getElementById(sectionId).style.display = 'block';
    
    // Smooth scroll to top, but only if we're not on the hero
    if (sectionId !== 'hero-section') {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    } else {
        // If we're going to the hero, scroll to the top of the page
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}

function initiatePurchase(productName, productPrice) {
    // The Enhanced Interrogation Logic with Price
    let discordTag = prompt(`[${productName} - $${productPrice} AUD]\nTo verify eligibility and facilitate delivery, please enter your Discord Tag (e.g., User#1234):`);
    if (!discordTag || !discordTag.match(/.+#\d{4}/)) {
        alert("Invalid Discord Tag. This is a required field for procurement.");
        return;
    }

    let isMember = confirm("Are you currently a member of the 360-Code Discord server? Click 'OK' for Yes, 'Cancel' for No.");

    if (isMember) {
        alert(`Excellent. Please open a ticket in the Discord and state you are seeking: "${productName}" for $${productPrice} AUD. Your tag is ${discordTag}.`);
    } else {
        alert("Access to our products requires community membership for support and verification. You will now be redirected.");
        window.location.href = "https://discord.gg/WJfQuTU82B";
    }
}
